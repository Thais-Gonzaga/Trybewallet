"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_reactRedux=require("react-redux"),_backDoorAction=_interopRequireDefault(require("../mockRedux/backDoorAction"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=l?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=e[n]}return a.default=e,r&&r.set(e,a),a}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Table extends _react.Component{constructor(...e){super(...e),_defineProperty(this,"state",{stateExpenses:[]}),_defineProperty(this,"onDeleteExpense",e=>{const{dispatch:t,expenses:r,shouldRemoveFromStore:a,shouldRemoveFromScreen:l}=this.props,n=r.filter(t=>t.id!==e);a?t((0,_backDoorAction.default)({wallet:{expenses:n}})):l&&this.setState({stateExpenses:n})})}componentDidMount(){const{expenses:e}=this.props;this.setState({stateExpenses:e})}componentDidUpdate(e){const{expenses:t,shouldRemoveFromScreen:r}=this.props;(r&&e.expenses!==t||e.expenses.length<t.length)&&this.setState({stateExpenses:t})}render(){const{shouldRenderDelBtn:e,btnDeleteTestId:t}=this.props,{stateExpenses:r}=this.state;return _react.default.createElement("table",null,_react.default.createElement("thead",null,_react.default.createElement("tr",null,_react.default.createElement("th",null,"Descrição"),_react.default.createElement("th",null,"Tag"),_react.default.createElement("th",null,"Método de pagamento"),_react.default.createElement("th",null,"Valor"),_react.default.createElement("th",null,"Moeda"),_react.default.createElement("th",null,"Câmbio utilizado"),_react.default.createElement("th",null,"Valor convertido"),_react.default.createElement("th",null,"Moeda de conversão"),_react.default.createElement("th",null,"Editar/Excluir"))),_react.default.createElement("tbody",null,r.map(({id:r,description:a,tag:l,method:n,name:u,currency:c,exchangeRates:o,value:d})=>_react.default.createElement("tr",{key:r},_react.default.createElement("td",null,a),_react.default.createElement("td",null,l),_react.default.createElement("td",null,n),_react.default.createElement("td",null,Number(d).toFixed(2)),_react.default.createElement("td",null,u),_react.default.createElement("td",null,Number(o[c].ask).toFixed(2)),_react.default.createElement("td",null,Math.round(Number(o[c].ask)*Number(d)*100)/100),_react.default.createElement("td",null,"Real"),_react.default.createElement("td",null,e&&_react.default.createElement("button",{type:"button","data-testid":t,onClick:()=>this.onDeleteExpense(r)},"Excluir"))))))}}const mapStateToProps=e=>({expenses:e.wallet.expenses});var _default=(0,_reactRedux.connect)(mapStateToProps)(Table);exports.default=_default;
